<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Учет запчастей</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        input, select, button { margin: 5px; padding: 5px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #eee; }
        .btn { padding: 5px 10px; cursor: pointer; }
        .controls { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        #addForm { display: none; margin-top: 20px; }
    </style>
</head>
<body>

<h2>Учет запчастей</h2>

<div class="controls">
    <input type="text" id="searchInput" placeholder="Поиск по каталожному номеру или наименованию">
    <button class="btn" onclick="showAddForm()">Добавить новую</button>
</div>

<table id="partsTable">
    <thead>
        <tr>
            <th>№</th>
            <th>Каталожный номер</th>
            <th>Наименование</th>
            <th>Количество</th>
            <th>Борт № комбайна</th>
            <th>Оригинал/Аналог</th>
            <th>Действие</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<form id="addForm">
    <input type="text" id="catalogNumber" placeholder="Каталожный номер" required>
    <input type="text" id="name" placeholder="Наименование" required>
    <input type="number" id="quantity" placeholder="Количество" required>
    <input type="text" id="machineNumber" placeholder="Борт № комбайна" required>
    <select id="type">
        <option value="Оригинал">Оригинал</option>
        <option value="Аналог">Аналог</option>
    </select>
    <button type="submit" class="btn">Сохранить</button>
</form>

<script>
    const addForm = document.getElementById('addForm');
    const tableBody = document.querySelector('#partsTable tbody');
    const searchInput = document.getElementById('searchInput');
    let parts = [];
    let editIndex = -1;

    function showAddForm() {
        addForm.style.display = 'block';
        editIndex = -1;
        addForm.reset();
    }

    addForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const catalogNumber = document.getElementById('catalogNumber').value;
        const name = document.getElementById('name').value;
        const quantity = document.getElementById('quantity').value;
        const machineNumber = document.getElementById('machineNumber').value;
        const type = document.getElementById('type').value;

        const part = { catalogNumber, name, quantity, machineNumber, type };

        if (editIndex > -1) {
            parts[editIndex] = part;
        } else {
            parts.push(part);
        }

        editIndex = -1;
        addForm.reset();
        addForm.style.display = 'none';
        renderTable();
    });

    function deleteRow(index) {
        parts.splice(index, 1);
        renderTable();
    }

    function editRow(index) {
        const part = parts[index];
        document.getElementById('catalogNumber').value = part.catalogNumber;
        document.getElementById('name').value = part.name;
        document.getElementById('quantity').value = part.quantity;
        document.getElementById('machineNumber').value = part.machineNumber;
        document.getElementById('type').value = part.type;

        addForm.style.display = 'block';
        editIndex = index;
    }

    function renderTable() {
        const filter = searchInput.value.toLowerCase();
        tableBody.innerHTML = '';
        parts.forEach((part, index) => {
            if (
                part.catalogNumber.toLowerCase().includes(filter) ||
                part.name.toLowerCase().includes(filter)
            ) {
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${part.catalogNumber}</td>
                    <td>${part.name}</td>
                    <td>${part.quantity}</td>
                    <td>${part.machineNumber}</td>
                    <td>${part.type}</td>
                    <td>
                        <button class="btn" onclick="editRow(${index})">Редактировать</button>
                        <button class="btn" onclick="deleteRow(${index})">Удалить</button>
                    </td>
                `;
            }
        });
    }

    searchInput.addEventListener('input', renderTable);
</script>

</body>
</html>
